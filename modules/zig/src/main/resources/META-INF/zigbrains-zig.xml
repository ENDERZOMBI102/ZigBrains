<!--
  ~ Copyright 2023-2024 FalsePattern
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<idea-plugin package="com.falsepattern.zigbrains.zig">
    <extensions defaultExtensionNs="com.intellij">
        <fileType name="Zig File"
                  implementationClass="com.falsepattern.zigbrains.zig.ZigFileType"
                  fieldName="INSTANCE"
                  language="Zig"
                  extensions="zig"/>

        <lang.parserDefinition language="Zig"
                               implementationClass="com.falsepattern.zigbrains.zig.parser.ZigParserDefinition"/>

        <colorSettingsPage implementation="com.falsepattern.zigbrains.zig.highlighter.ZigColorSettingsPage"/>

        <lang.syntaxHighlighterFactory language="Zig"
                                       implementationClass="com.falsepattern.zigbrains.zig.highlighter.ZigSyntaxHighlighterFactory"/>

        <lang.braceMatcher language="Zig"
                           implementationClass="com.falsepattern.zigbrains.zig.pairing.ZigBraceMatcher"/>

        <lang.commenter language="Zig" implementationClass="com.falsepattern.zigbrains.zig.comments.ZigCommenter"/>

        <lang.formatter language="Zig" implementationClass="com.falsepattern.zigbrains.zig.formatter.ZigFormattingModelBuilder"/>

        <postStartupActivity implementation="com.falsepattern.zigbrains.zig.lsp.ZLSStartupActivity"/>

        <!-- LSP textDocument/signatureHelp -->
        <codeInsight.parameterInfo
                language="Zig"
                implementationClass="com.redhat.devtools.lsp4ij.features.signatureHelp.LSPParameterInfoHandler"/>
        <!-- LSP textDocument/folding -->
        <lang.foldingBuilder language="Zig"
                             implementationClass="com.redhat.devtools.lsp4ij.features.foldingRange.LSPFoldingRangeBuilder"
                             order="first"/>
    </extensions>

    <extensions defaultExtensionNs="com.falsepattern.zigbrains">
        <zlsConfigProvider implementation="com.falsepattern.zigbrains.zig.settings.ZLSSettingsConfigProvider"/>
    </extensions>

    <extensions defaultExtensionNs="com.redhat.devtools.lsp4ij">
        <server id="ZigBrains"
                name="Zig ZLS"
                factoryClass="com.falsepattern.zigbrains.zig.lsp.ZLSLanguageServerFactory">
            <description><![CDATA[
The <a href="https://github.com/Zigtools/ZLS">Zig Language Server</a>, for ZigBrains
]]>
            </description>
        </server>
        <languageMapping language="Zig" serverId="ZigBrains" languageId="zig"/>

    </extensions>
</idea-plugin>